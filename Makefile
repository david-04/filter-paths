include .launchpad/Makefile.header # see .launchpad/Makefile.documentation

#-----------------------------------------------------------------------------------------------------------------------
# Default target
#-----------------------------------------------------------------------------------------------------------------------

autorun : $(LP_PREREQUISITE_TEST);

#-----------------------------------------------------------------------------------------------------------------------
# Compile
#-----------------------------------------------------------------------------------------------------------------------

src/utils/version.ts : CHANGELOG.md bin/update-version-number.sh
	. bin/update-version-number.sh

src/utils/manual.ts : README.md bin/embed-manual.sh bin/embed-manual.mjs
	. bin/embed-manual.sh

#-----------------------------------------------------------------------------------------------------------------------
# Bundle
#-----------------------------------------------------------------------------------------------------------------------

$(call lp.bundle.add, src/filter-paths.ts, build/bundler/filter-paths.js, shebang sourcemap)

#-----------------------------------------------------------------------------------------------------------------------
# Release
#-----------------------------------------------------------------------------------------------------------------------

$(call lp.help.add-phony-target, release, ............ assemble the release)

run release : $(LP_PREREQUISITE_TEST) $(LP_PREREQUISITE_BUNDLE)
	. bin/assemble-release.sh

#-----------------------------------------------------------------------------------------------------------------------
# Publish
#-----------------------------------------------------------------------------------------------------------------------

$(call lp.help.add-phony-target, publish, ............ publish the package to npm)

publish : ;
	. bin/publish.sh

#-----------------------------------------------------------------------------------------------------------------------
# Clean
#-----------------------------------------------------------------------------------------------------------------------

$(call lp.clean.files, build dist)

#-----------------------------------------------------------------------------------------------------------------------
include .launchpad/Makefile.footer
